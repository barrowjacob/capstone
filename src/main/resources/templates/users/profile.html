<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head th:insert="partials/fragments :: head('Profile Page')">
    <meta charset="UTF-8">
    <title>Profile Page</title>
</head>
<body>
<!--need to add profile security-->

<nav th:insert="partials/fragments :: nav" class="is-blue"></nav>

<!--<h1 class="username" th:text="${user.username}"></h1>-->

<br/>
<h1 th:text="${user.id}"></h1>
<h1 th:text="${user.email}"></h1>
<h1 th:text="${user.first_name}"></h1>
<h1 th:text="${user.last_name}"></h1>
<h1 th:text="${user.phone_num}"></h1>
<img th:src="${user.image_path}">

<h1>Welcome, <span th:text="${user.username}"></span></h1>



<form th:action="@{'/users/' + ${user.id} + '/profile'}" th:method="POST">

    <div class="modal">

        <div id="image">

        </div>

        <button class="button is-small is-success is-outlined">SUBMIT</button>
    </div>
</form>
<button id="showModal" class="button" type="button">Upload Image</button>



<script type="text/javascript" src="/static/js/keys.js"></script>
<script type="text/javascript" src="//static.filestackapi.com/filestack-js/3.x.x/filestack.min.js"></script>
<script src="https://code.jquery.com/jquery-3.4.1.js"
        integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="
        crossorigin="anonymous"></script>

<script>
    $(document).ready(function () {

        const client = filestack.init("ALxIrpTymC0nHFBIAR2QMz");
        const options = {
            onUploadDone: (res) => $('#image').append(`<input type="text" name="image_path" value="https://cdn.filestackcontent.com/${res.filesUploaded[0].handle}">`)
        };
        $("#showModal").click(function () {
            $('.modal').toggleClass('is-active');

            client.picker(options).open();
        });
        // $("#closeModal").click(function () {
        //     $('.modal').removeClass('is-active');
        // });

    });
    //     let options = {
    //         onUploadDone: (res) => $('#imgHere').append(`<input id="picture"  src="https://cdn.filestackcontent.com/${res.filesUploaded[0].handle}">`),
    //     };
    //     client.picker(options).open();
    //
    // });


    /////////
    // $(document).ready(function () {
    //
    //     const client = filestack.init(fileStackKey);
    //
    //     const options = {
    //         onUploadDone: (res) => $('#imgPath').val(`<input id="picture"  src="https://cdn.filestackcontent.com/${res.filesUploaded[0].handle}">`),
    //     };
    //
    //     $("#showModal").click(function () {
    //
    //         $(".modal").addClass("is-active");
    //
    //         client.picker(options).open();
    //
    //     });
    //
    //     $('#closeModal').click(function () {
    //         $(".modal").removeClass("is-active");
    //         client.picker(options).close();
    //
    //     })
    //
    //     // const imgInput = $('#imagePath').val();
    //     // const option = {
    //     //     onUploadDone: (res) => imgInput
    //     // }
    //
    //
    // });
</script>

</body>
</html>